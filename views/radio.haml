%scripts{:'src' => 'http://connect.soundcloud.com/sdk.js'}
%script{:'data-main' => 'js/radio.js', :src => 'js/vendor/components/requirejs/require.js'}

:javascript
  window.session = {
    accessToken: "#{session[:user].access_token}",
    userId: "#{session[:user].id}"
  };


%script#track-template{:type => 'text/template'}
  :plain
    <div class="overlay"></div>
    <a class="artist" href="<%= track.user.permalink_url %>"><%= track.user.username %></a>
    <br>
    <a class="title" href="<%= track.permalink_url %>"><%= track.title %></a>

%script#controls-template{:type => 'text/template'}
  :plain
    <div id="controls">
      <a class="control pull-left" id="prev"><i class="icon-step-backward"></i></a>
      <% if (playing) { %>
        <a class="control" id="pause"><i class="icon-pause"></i></a>
      <% } else { %>
        <a class="control" id="play"><i class="icon-play"></i></a>
      <% } %>
      <a class="control pull-right" id="next"><i class="icon-step-forward"></i></a>
    </div>


#radio

  .row

    .span6.offset3
      #current-track
        #tracks
          %i#loader.icon-refresh.icon-spin
        #controls-container
